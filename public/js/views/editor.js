(function(){var __hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};define(["jquery","bootstrap","underscore","backbone","ligaments","views/display","text!/js/templates/editor.ejs"],function($,bootstrap,_,Backbone,ligaments,Display,EditorTemplate){var EditorView;return EditorView=function(_super){function EditorView(){return EditorView.__super__.constructor.apply(this,arguments)}return __extends(EditorView,_super),EditorView.prototype.template=_.template(EditorTemplate),EditorView.prototype.attributes={"class":"modal fade"},EditorView.prototype.initialize=function(options){return this.viewVars={},this.model=options.model,this.pad=options.pad,this.render(),new Backbone.Ligaments({model:this.model,view:this})},EditorView.prototype.events={"click [data-behavior]":"delegateBehavior","click canvas":"play","change input.eq":"eq"},EditorView.prototype.delegateBehavior=function(e){var behavior;return behavior=$(e.currentTarget).data("behavior"),null!=behavior&&_.isFunction(this[behavior])?this[behavior].call(this,e):void 0},EditorView.prototype.eq=function(e){var freq,param;return param=e.currentTarget.getAttribute("data-param"),freq=this.model.get("fx.eq.params."+param),freq[2]=parseInt($(e.currentTarget).val(),10),this.model.set("fx.eq.params."+param,freq),console.log(freq)},EditorView.prototype.tab=function(e){var tabClass;return tabClass=$(e.currentTarget).data("tab"),$(e.currentTarget).addClass("active").siblings().removeClass("active"),this.$(".tab-pane").hide(),this.$(".tab-pane"+tabClass).show()},EditorView.prototype.toggleEffect=function(e){var effect;return effect=$(e.currentTarget).data("effect"),this.model.get("fx."+effect)?(delete this.viewVars.show,this.removeEffect(effect)):(this.viewVars.show=effect,this.addEffect(effect))},EditorView.prototype.addEffect=function(effect){var fx;switch(effect){case"reverb":fx={room:0,damp:0,mix:.5};break;case"delay":fx={time:100,fb:.2,mix:.33};break;case"chorus":fx={type:"sin",delay:20,rate:4,depth:20,fb:.2,wet:.33}}return this.model.set("fx."+effect,fx),this.render()},EditorView.prototype.removeEffect=function(effect){return this.model.unset("fx."+effect),this.render()},EditorView.prototype.play=function(e){return e.preventDefault(),this.pad.play()},EditorView.prototype.show=function(){return this.$el.modal("show")},EditorView.prototype.hide=function(){return this.$el.modal("hide")},EditorView.prototype.render=function(){return this.el.innerHTML=this.template({data:this.model.toJSON(),view:this.viewVars}),this.$canvas=this.$(".waveform"),this.pad.T?this.pad.T.raw.plot({target:this.$canvas.get(0),background:"rgb(70,70,70)",foreground:"#f08a24"}):void 0},EditorView}(Backbone.View)})}).call(this);